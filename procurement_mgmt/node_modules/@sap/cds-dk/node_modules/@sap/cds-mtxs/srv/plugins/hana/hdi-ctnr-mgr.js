const cds = require('@sap/cds')
const { sm_url, baseurl } = cds.env.requires.db.credentials
const LOG = cds.log('mtx')

if (sm_url) {
  module.exports = require('./srv-mgr')
}

if (baseurl) {
  if (cds.env.requires['cds.xt.SaasProvisioningService']?.upgrade?.ignoreNonExistingContainers) {
    LOG.warn('SaaS Provisioning Service is configured with ignoreNonExistingContainers. This can cause problems when using HANA TMS v2 as container manager.')
  }
  module.exports = require('./tms').newInstance(cds.env.requires.db.credentials)
}